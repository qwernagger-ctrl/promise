<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Promise + async/await — карта</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h3>Promise → async/await → карта</h3>

  <button id="go">Загрузить точку</button>
  <span id="status">ожидание</span>

  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([51.5, -0.12], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    function getData() {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve({
            name: "Полученная точка",
            lat: 51.5033,
            lng: -0.1195
          });
        }, 900);
      });
    }

    document.getElementById('go').onclick = async () => {
      const status = document.getElementById('status');
      try {
        status.textContent = "загрузка...";
        const d = await getData();
        map.setView([d.lat, d.lng], 15);
        L.marker([d.lat, d.lng]).addTo(map).bindPopup(d.name).openPopup();
        status.textContent = "готово";
      } catch {
        status.textContent = "ошибка";
      }
    };
  </script>
</body>
</html>
